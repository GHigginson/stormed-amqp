Exception RuntimeError: 'maximum recursion depth exceeded while calling a Python object' in <type 'exceptions.AttributeError'> ignored
Exception RuntimeError: 'maximum recursion depth exceeded in __subclasscheck__' in <type 'exceptions.AttributeError'> ignored
Traceback (most recent call last):
  File "/usr/lib/python2.6/logging/__init__.py", line 768, in emit
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 196, in _handle_events
    self._handle_read()
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 255, in _handle_read
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
ERROR:root:Exception in I/O handler for fd 6
Traceback (most recent call last):
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/ioloop.py", line 271, in start
    self._handlers[fd](fd, events)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 196, in _handle_events
    self._handle_read()
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 255, in _handle_read
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 37, in _with_payload
    self.callback(self.frame)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 80, in _frame_loop
    FrameReader(self.stream, self._frame_loop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 20, in __init__
    self._read_header()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 23, in _read_header
    self.stream.read_bytes(7, self._with_header)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 227, in _run_callback
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/stack_context.py", line 173, in wrapped
    callback(*args, **kwargs)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 29, in _with_header
    self.stream.read_bytes(size+1, self._with_payload)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 146, in read_bytes
    if self._read_from_buffer():
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 311, in _read_from_buffer
    self._run_callback(callback, self._consume(num_bytes))
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 230, in _run_callback
    exc_info=True)
  File "/usr/lib/python2.6/logging/__init__.py", line 1448, in error
    root.error(*((msg,)+args), **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1074, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.6/logging/__init__.py", line 1165, in _log
    self.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1175, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 1212, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 673, in handle
    self.emit(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 796, in emit
    self.handleError(record)
  File "/usr/lib/python2.6/logging/__init__.py", line 725, in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "/usr/lib/python2.6/traceback.py", line 125, in print_exception
    print_tb(tb, limit, file)
  File "/usr/lib/python2.6/traceback.py", line 69, in print_tb
    line = linecache.getline(filename, lineno, f.f_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 14, in getline
    lines = getlines(filename, module_globals)
  File "/home/paolo/m3/env/stormed/lib/python2.6/linecache.py", line 40, in getlines
    return updatecache(filename, module_globals)
RuntimeError: maximum recursion depth exceeded
 [*] Waiting for messages. To exit press CTRL+C
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
 [x] Received 'Hello World!'
Traceback (most recent call last):
  File "./receive.py", line 25, in <module>
    conn.close(io_loop.stop)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/connection.py", line 55, in close
    ch.close(self.close)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/channel.py", line 22, in close
    self.send_method(_close, callback)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 145, in send_method
    self._flush()
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 152, in _flush
    self.write_method(method)
  File "/home/paolo/m3/env/stormed/src/stormed-amqp/stormed/frame.py", line 164, in write_method
    self.conn.stream.write(f)
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 161, in write
    self._check_closed()
  File "/home/paolo/m3/env/stormed/src/tornado/tornado/iostream.py", line 361, in _check_closed
    raise IOError("Stream is closed")
IOError: Stream is closed
